---
name: Remove injector replacement functions
status: closed
created: 2026-02-04T08:58:48Z
updated: 2026-02-04T09:18:53Z
github: [Will be updated when synced to GitHub]
depends_on: [001]
parallel: true
conflicts_with: [003]
---

# Task: Remove injector replacement functions

## Description
Remove all Text Replacements-related functions and logic from the injector JavaScript file. This includes the text replacement compilation, DOM text replacement, and shadow DOM traversal functions.

## Acceptance Criteria
- [x] `compileReplacements()` function removed
- [x] `replaceText()` function removed
- [x] `replaceShadowDOMText()` function removed
- [x] `this.replacements` property references removed
- [x] `this.compiledReplacements` property references removed
- [x] Replacement calls removed from `applyRebrand()` function
- [x] `escapeRegExp()` helper removed (if only used for replacements)
- [x] No JavaScript errors in browser console

## Technical Details
- File affected: `custom_components/ha_rebrand/frontend/ha-rebrand-injector.js`
- Remove entire function definitions
- Remove property initializations
- Remove calls from `applyRebrand()` or similar entry points
- Check if `escapeRegExp()` is used elsewhere before removing

## Dependencies
- [x] Task 001 - Backend code must be removed first so config doesn't send replacement data

## Effort Estimate
- Size: S
- Hours: 1-2
- Parallel: true (can run alongside Task 003)

## Definition of Done
- [x] All replacement functions removed
- [x] No JavaScript syntax errors
- [x] Injector loads and initializes correctly
- [x] Other rebranding features (logo, favicon, colors) still work

## Completion Notes
Completed in commit `2fcc922`. Removed 143 lines including `compileReplacements()`, `replaceText()`, `replaceShadowDOMText()`, `escapeRegExp()`, and `MAX_SHADOW_DOM_DEPTH` constant.
