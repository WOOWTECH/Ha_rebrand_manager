---
name: Project Setup
status: closed
created: 2026-02-02T10:02:04Z
updated: 2026-02-02T10:06:21Z
github:
depends_on: []
parallel: false
conflicts_with: []
---

# Task 001: Project Setup

## Description

Set up the project foundation with a properly configured `pyproject.toml` that includes all necessary test dependencies and tool configurations. This task establishes the testing infrastructure that all subsequent tasks will depend on.

## Acceptance Criteria

- [ ] `pyproject.toml` exists at project root with proper metadata
- [ ] All test dependencies are specified and installable
- [ ] Ruff linter is configured with appropriate rules for Home Assistant custom components
- [ ] Mypy is configured for Python type checking
- [ ] Test commands are available via project scripts
- [ ] `pip install -e ".[dev]"` succeeds without errors

## Technical Details

### Dependencies to Include

**Core Testing:**
- `pytest>=8.0.0` - Test framework
- `pytest-asyncio>=0.23.0` - Async test support
- `pytest-cov>=4.0.0` - Coverage reporting
- `pytest-homeassistant-custom-component>=0.13.0` - HA mocking utilities

**Static Analysis:**
- `ruff>=0.3.0` - Fast Python linter and formatter
- `mypy>=1.8.0` - Static type checker

**E2E Testing:**
- `playwright>=1.40.0` - Browser automation for UI tests

### Ruff Configuration

```toml
[tool.ruff]
target-version = "py312"
line-length = 88
select = ["E", "F", "W", "I", "N", "UP", "ANN", "ASYNC", "B", "C4", "RUF"]
ignore = ["ANN101", "ANN102"]  # self/cls annotations

[tool.ruff.per-file-ignores]
"tests/*" = ["ANN"]  # Relax annotation rules for tests
```

### Mypy Configuration

```toml
[tool.mypy]
python_version = "3.12"
warn_return_any = true
warn_unused_configs = true
ignore_missing_imports = true
```

### Test Scripts

```toml
[project.scripts]
# Or use tool.hatch.scripts if using hatch
```

Consider adding a Makefile or scripts section for common commands:
- `test` - Run pytest
- `lint` - Run ruff check
- `typecheck` - Run mypy
- `format` - Run ruff format

## Dependencies

None - this is the foundation task.

## Effort Estimate

**Size:** Small (1-2 hours)
**Complexity:** Low
**Risk:** Low

## Definition of Done

1. `pyproject.toml` is created and properly formatted
2. Running `pip install -e ".[dev]"` in a fresh virtualenv succeeds
3. `pytest --version` shows correct version after install
4. `ruff --version` shows correct version after install
5. `mypy --version` shows correct version after install
6. No dependency conflicts reported during installation
